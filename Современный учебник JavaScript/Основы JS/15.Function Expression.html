<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>15.Function Expression</title>
</head>
<body>
    <script>
    // Function Expression
    // Существует ещё один синтаксис создания функций, который
    // называется Function Expression (Функциональное Выражение).
    // Оно выглядит вот так:
    // let sayHi = function() {
    // alert( "Привет" );
    // };
    // Мы можем даже вывести это значение с помощью alert:
    // function sayHi() {
    // alert( "Привет" );
    // }
    // alert( sayHi ); // выведет код функции
    // Мы можем скопировать функцию в другую переменную:
    // function sayHi() {   // (1) создаём
    // alert( "Привет" );
    // }
    // let func = sayHi;    // (2) копируем
    // func(); // Привет    // (3) вызываем копию (работает)!
    // sayHi(); // Привет   //     прежняя тоже работает (почему бы нет)

    // Функции-«колбэки»
    // Рассмотрим ещё примеры функциональных выражений и передачи функции как значения.
    // Давайте напишем функцию ask(question, yes, no) с тремя параметрами:
    // question
    // Текст вопроса
    // yes
    // Функция, которая будет вызываться, если ответ будет «Yes»
    // no
    // Функция, которая будет вызываться, если ответ будет «No»
    // Наша функция должна задать вопрос question и, в зависимости от того, как ответит пользователь, вызвать yes() или no():
    // function ask(question, yes, no) {
    // if (confirm(question)) yes()
    // else no();
    // }
    // function showOk() {
    // alert( "Вы согласны." );
    // }
    // function showCancel() {
    // alert( "Вы отменили выполнение." );
    // }
    // // использование: функции showOk, showCancel передаются в качестве аргументов ask
    // ask("Вы согласны?", showOk, showCancel);
    // Аргументы функции ask ещё называют функциями-колбэками или просто колбэками.
    // Ключевая идея в том, что мы передаём функцию и ожидаем, что она вызовется обратно
    // (от англ. «call back» – обратный вызов) когда-нибудь позже, если это будет необходимо.
    // В нашем случае, showOk становится колбэком’ для ответа «yes», а showCancel – для ответа «no».
    // Мы можем переписать этот пример значительно короче, используя Function Expression:
    // function ask(question, yes, no) {
    // if (confirm(question)) yes()
    // else no();
    // }
    // ask(
    // "Вы согласны?",
    // function() { alert("Вы согласились."); },
    // function() { alert("Вы отменили выполнение."); }
    // );

    // Function Expression в сравнении с Function Declaration
    // sayHi("Вася"); // Привет, Вася
    // function sayHi(name) {
    // alert( `Привет, ${name}` );
    // }
    // Функция sayHi была создана, когда движок JavaScript подготавливал скрипт к выполнению,
    // и такая функция видна повсюду в этом скрипте.
    // …Если бы это было Function Expression, то такой код вызовет ошибку:
    // sayHi("Вася"); // ошибка!
    // let sayHi = function(name) {  // (*) магии больше нет
    // alert( `Привет, ${name}` );
    // };
    // В строгом режиме, когда Function Declaration находится в блоке {...},
    // функция доступна везде внутри блока. Но не снаружи него.
    // Для примера давайте представим, что нам нужно создать функцию welcome()
    // в зависимости от значения переменной age, которое мы получим во время выполнения кода.
    // И затем запланируем использовать её когда-нибудь в будущем.
    // Такой код, использующий Function Declaration, работать не будет:
    // let age = prompt("Сколько Вам лет?", 18);
    // // в зависимости от условия объявляем функцию
    // if (age < 18) {
    // function welcome() {
    //     alert("Привет!");
    // }
    // } else {
    // function welcome() {
    //     alert("Здравствуйте!");
    // }
    // }
    // // ...не работает
    // welcome(); // Error: welcome is not defined

    // Это произошло, так как объявление Function Declaration видимо только внутри блока кода, в котором располагается.
    // Вот ещё один пример:
    // let age = 16; // присвоим для примера 16
    // if (age < 18) {
    // welcome();               // \   (выполнится)
    //                         //  |
    // function welcome() {     //  |
    //     alert("Привет!");      //  |  Function Declaration доступно
    // }                        //  |  во всём блоке кода, в котором объявлено
    //                         //  |
    // welcome();               // /   (выполнится)
    // } else {
    // function welcome() {
    //     alert("Здравствуйте!");
    // }
    // }
    // // здесь фигурная скобка закрывается,
    // // поэтому Function Declaration, созданные внутри блока кода выше -- недоступны отсюда.
    // welcome(); // Ошибка: welcome is not defined

    // Верным подходом будет воспользоваться функцией, объявленной при помощи Function Expression,
    // и присвоить значение welcome переменной, объявленной снаружи if, что обеспечит нам нужную видимость.
    // Такой код работает, как ожидалось:
    // let age = prompt("Сколько Вам лет?", 18);
    // let welcome = (age < 18) ?
    // function() { alert("Привет!"); } :
    // function() { alert("Здравствуйте!"); };
    // welcome(); // теперь всё в порядке

    // Когда использовать Function Declaration, а когда Function Expression?
    // Как правило, если нам понадобилась функция, в первую очередь нужно рассматривать синтаксис
    // Function Declaration, который мы использовали до этого. Он даёт нам больше свободы в том,
    // как мы можем организовывать код. Функции, объявленные таким образом, можно вызывать до их объявления.
    // Также функции вида function f(…) {…} чуть более заметны в коде, чем let f = function(…) {…}.
    // Function Declaration легче «ловятся глазами».
    // …Но если Function Declaration нам не подходит по какой-то причине (мы рассмотрели это в примере выше),
    // то можно использовать объявление при помощи Function Expression.
        </script>
</body>
</html>